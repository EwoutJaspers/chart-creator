parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eSUn":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScriptSettings=void 0;var i=function(){function e(){t(this,e)}return n(e,[{key:"filename",set:function(t){this._filename=t},get:function(){return this._filename}},{key:"id",set:function(t){this._id=t},get:function(){return this._id}},{key:"json",set:function(t){this._json=t},get:function(){return this._json}},{key:"source",set:function(t){this._settings=t},get:function(){return this._source}}]),e}();exports.ScriptSettings=i;
},{}],"jdwT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addHTML=a,exports.getScriptSettings=t;var e=require("../classes/ScriptSettings.js");function a(e){var a=1;if(e.locationNames.length>1&&(a=2),2===a)var t='<label class="label">Select '+e.locationLabels[1]+':</label><select class="select dropdown '+e.classname+' II form-control" id="location-'+e.classname+'"></select>';else t="";if(""!==e.measureName)var s='<label class="label">Select '+e.measureLabel+':</label><select class="select dropdown '+e.classname+' III form-control" id="measure-'+e.classname+'"><option value="measure">measure</option></select>';else s="";var l='<div><form><label class="label">Select '+e.locationLabels[0]+':</label><select class="select dropdown '+e.classname+' I form-control" id="hb-'+e.classname+'"><option value="Scotland">Scotland</option></select> '+t+s+'</form></div><h3 id="chartLocation-'+e.classname+'"></h3><div style="padding-left:12px; padding-right:12px; text-align:center;" id="figure-legend-'+e.classname+'"></div><div class="chart-div-'+e.classname+'" id="figure-'+e.classname+'"></div>';document.getElementById(e.classname).innerHTML=l}function t(){var a=function(){var e;return document.currentScript?document.currentScript:(e=document.getElementsByTagName("script"))[e.length-1]},t=a().dataset;t.filename||(t=document.getElementById("jscode").dataset,console.warn("chart creator jscode"));var s=new e.ScriptSettings;return s.filename=t.filename,s.id=t.id,s.json=t.settings,s.source=a().dataset,s}
},{"../classes/ScriptSettings.js":"eSUn"}],"WRq1":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChartInfo=void 0;var i=function(){function e(){t(this,e)}return n(e,[{key:"chartType",set:function(t){this._chartType=t},get:function(){return this._chartType}},{key:"dateFormatInput",set:function(t){this._dateFormatInput=t},get:function(){return this._dateFormatInput}},{key:"dateFormatTooltip",set:function(t){this._dateFormatTooltip=t},get:function(){return this._dateFormatTooltip}},{key:"dateCatName",set:function(t){this._dateCateName=t},get:function(){return this._dateCateName}},{key:"locationNames",set:function(t){this._locationNames=t},get:function(){return this._locationNames}},{key:"locationLabels",set:function(t){this._locationLabels=t},get:function(){return this._locationLabels}},{key:"measureName",set:function(t){this._measureName=t},get:function(){return this._measureName}},{key:"measureLabel",set:function(t){this._measureLabel=t},get:function(){return this._measureLabel}},{key:"variableNames",set:function(t){this._variableNames=t},get:function(){return this._variableNames}},{key:"variableLabels",set:function(t){this._variableLabels=t},get:function(){return this._variableLabels}},{key:"xFormatString",set:function(t){this._xFormatString=t},get:function(){return this._xFormatString}},{key:"xFormat",set:function(t){this._xFormat=t},get:function(){return this._xFormat}},{key:"classname",set:function(t){this._classname=t},get:function(){return this._classname}},{key:"location_id",set:function(t){this._location_id=t},get:function(){return this._location_id}},{key:"location_title",set:function(t){this._location_title=t},get:function(){return this._location_title}},{key:"htmlFigureId",set:function(t){this._htmlFigureId=t},get:function(){return this._htmlFigureId}},{key:"title",set:function(t){this._title=t},get:function(){return this._title}},{key:"xlabel",set:function(t){this._xlabel=t},get:function(){return this._xlabel}},{key:"ylabel",set:function(t){this._ylabel=t},get:function(){return this._ylabel}},{key:"circlesize",set:function(t){this._circlesize=t},get:function(){return this._circlesize}},{key:"highlight_circlesize",set:function(t){this._highlight_circlesize=t},get:function(){return this._highlight_circlesize}},{key:"colourNumbers",set:function(t){this._colourNumbers=t},get:function(){return this._colourNumbers}},{key:"colours",set:function(t){this._colours=t},get:function(){return this._colours}},{key:"font_family",set:function(t){this._font_family=t},get:function(){return this._font_family}},{key:"tooltip_adjustright",set:function(t){this._tooltip_adjustright=t},get:function(){return this._tooltip_adjustright}},{key:"lineStroke",set:function(t){this._lineStroke=t},get:function(){return this._lineStroke}},{key:"margin",set:function(t){this._margin=t},get:function(){return this._margin}},{key:"ticks",set:function(t){this._ticks=t},get:function(){return this._ticks}},{key:"numberofticks",set:function(t){this._numberofticks=t},get:function(){return this._numberofticks}},{key:"dataset",set:function(t){this._dataset=t},get:function(){return this._dataset}},{key:"scale",set:function(t){this._scale=t},get:function(){return this._scale}},{key:"minWidth",set:function(t){this._minWidth=t},get:function(){return this._minWidth}},{key:"maxWidth",set:function(t){this._maxWidth=t},get:function(){return this._maxWidth}},{key:"divWidth",set:function(t){this._divWidth=t},get:function(){return this._divWidth}},{key:"YmaxValues",set:function(t){this._YmaxValues=t},get:function(){return this._YmaxValues}},{key:"previousDataLength",set:function(t){this._previousDataLength=t},get:function(){return this._previousDataLength}},{key:"newDataLength",set:function(t){this._newDataLength=t},get:function(){return this._newDataLength}},{key:"h",set:function(t){this._h=t},get:function(){return this._h}},{key:"w",set:function(t){this._w=t},get:function(){return this._w}},{key:"locname",set:function(t){this._locname=t},get:function(){return this._locname}},{key:"locnameFunc",set:function(t){this._locnameFunc=t},get:function(){return this._locnameFunc}}]),e}();exports.ChartInfo=i;
},{}],"TYfu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setSettings=a;var e=require("../classes/ChartInfo.js");function a(a,t){var i="hb-";a.locationNames.length>1&&(i="location-");var l=new e.ChartInfo;return l.chartType=a.chartType||"line",l.dateFormatInput=a.dateFormatInput||"%Y-%m-%d",l.dateFormatTooltip=a.dateFormatTooltip||"%d %B %Y",l.dateCatName=a.dateCatName||"date",l.locationNames=a.locationNames||["nhsboard_name","hospital_name"],l.locationLabels=a.locationLabels||["NHS Board","Location"],l.measureName=a.measureName||"",l.measureLabel=a.measureLabel||"",l.variableNames=a.variableNames||["variable_1"],l.variableLabels=a.variableLabels||["Variable 1"],l.xFormatString=a.xFormatString||"%b%y",l.classname=t,l.location_id=i,l.location_title="chartLocation-",l.htmlFigureId="#figure-"+t,l.title=a.title||"",l.xlabel=a.xlabel||"x label",l.ylabel=a.ylabel||"y label",l.circlesize=a.circlesize||5,l.highlight_circlesize=a.highlight_circlesize||6,l.colourNumbers=a.colourNumbers||["I","II","III","IV","V","VI"],l.colours=a.colours||{I:"#004785",II:"#00a2e5",III:"#4c7ea9",IV:"#99daf5",V:"#4cbeed",VI:"#99b5ce"},l.font_family=a.font_family||"'Helvetica Neue', Helvetica, Arial, sans-serif",l.tooltip_adjustright=a.tooltip_adjustright||155,l.lineStroke=a.lineStroke||3,l.margin=a.margin||{top:25,right:25,bottom:45,left:85},l.ticks=a.ticks||4,l.numberofticks=a.numberofticks||{sm:4,md:6,lg:8},l.dataset=[],l.scale={y:{},max:{left:{}}},l.minWidth=a.minWidth||320,l.maxWidth=a.maxWidth||920,l.divWidth=a.divWidth||320,l.YmaxValues=[],l.previousDataLength=void 0,l.newDataLength=void 0,l.h=a.h||600,l.w=a.w||400,l.locname=void 0,l.locnameFunc=function(){return document.getElementById(""+this.location_id+this.classname).value},l.measure=void 0,l.measureFunc=function(){return document.getElementById("measure-"+this.classname).value},l}
},{"../classes/ChartInfo.js":"WRq1"}],"MmnY":[function(require,module,exports) {
"use strict";function e(e){d3.select("body").append("div").attr("class","tooltipv2 "+e.classname),d3.select(".tooltipv2."+e.classname).style("position","absolute").style("white-space","nowrap").style("width",160).style("height","auto").style("padding","10px").style("background-color","white").style("border","1px solid black").style("box-shadow","black 4px 4px 10px rgba(0, 0, 0, 0.4)").style("pointer-events","none").style("font-family",e.font_family).style("font-size","1rem times").style("display","none")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.chartToolTip=e;
},{}],"TeHb":[function(require,module,exports) {
"use strict";function a(a){if("area"===a.chartType){a.YmaxValues=a.dataset.map(function(e){for(var t=0,r=0;r<a.variableNames.length;r++)t+=e[a.variableNames[r]];return t});var e=d3.max(a.YmaxValues,function(a){return 1.05*a})}else{for(var t=0;t<a.variableNames.length;t++)a.YmaxValues[t]=e=d3.max(a.dataset,function(e){return e[a.variableNames[t]]});e=d3.max(a.YmaxValues,function(a){return 1.05*a})}return e}function e(a){a.divWidth=document.getElementsByClassName("chart-div-"+a.classname)[0].clientWidth,a.divWidth<a.minWidth?a.divWidth=a.minWidth:a.divWidth>a.maxWidth&&(a.divWidth=a.maxWidth);var e=a.margin.left;return a.divWidth<740&&"bar"!==a.chartType&&"catbarver"!==a.chartType&&(e=15),a.w=a.divWidth-e-a.margin.right,a.h=.52*a.divWidth-a.margin.top-a.margin.bottom,a}function t(a){return a.scale.x.range([0,a.w],.1),a.scale.y.left=d3.scaleLinear().range([a.h,0]).domain([0,a.scale.max.left]),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.yMax=a,exports.chartWidthHeight=e,exports.chartScale=t;
},{}],"eod4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mouseOverBar=t,exports.mouseOutBar=r;var e=d3.format(",");function t(t,r,o){for(var a=d3.timeFormat(r.dateFormatTooltip),s=r.chartType.substring(0,3),l=[],n=[],i=d3.select(".tooltipv2."+r.classname),c=(l=[],[]),u=0;u<r.variableNames.length;u++)n[u]=d3.select(".circlev2."+r.classname+"."+r.colourNumbers[u]+".index-"+o),n[u].transition("bigger_circle").duration(200).attr("r",r.highlight_circlesize),c[u]={number:t[r.variableNames[u]],tooltext:' <br><span style="color:'+r.colours[r.colourNumbers[u]]+'" class="font-size--big colour__'+r.colourNumbers[u]+'--color">&#9644;</span>'+r.variableLabels[u]+": "+e(t[r.variableNames[u]].toFixed(1))};c.sort(function(e,t){return t.number-e.number});l=c.map(function(e){return e.tooltext});var d=0;o>.6*r.dataset.length&&(d=1);var m=a(t.date);"cat"===s&&(m=t.cat),i.html("<strong>"+m+"</strong> "+l.join("")).style("display","block");var p=i.node().getBoundingClientRect().width;i.style("left",d3.event.pageX-p*d+"px").style("top",d3.event.pageY+20+"px")}function r(e,t){d3.select(" .tooltipv2."+e.classname).style("display","none")}
},{}],"K168":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawHoverBar=e;var t=require("./mouse-over-out.js");function e(e,a){var r=a.chartType.substring(0,3);e.selectAll("bars").data(a.dataset).enter().append("rect").attr("class",function(t,e){return" hoverbars--hide "+a.classname+" hoverbars index-"+e}).attr("x",function(t){return"cat"===r?a.scale.x(t.cat):a.scale.x(t.date)}).attr("y",0).attr("width",a.scale.x.bandwidth()).attr("height",function(t){return a.h}).attr("opacity",0).attr("fill","#bebebe").on("mouseout",function(e,r){d3.select(this).attr("opacity",0),(0,t.mouseOutBar)(a,r)}).on("mouseover",function(e,r){d3.select(this).attr("opacity",.3),(0,t.mouseOverBar)(e,a,r)}),e.on("mouseout",function(t,e){d3.selectAll(".hoverbars").attr("opacity",0),d3.select(" .tooltipv2."+a.classname).style("display","none")})}
},{"./mouse-over-out.js":"eod4"}],"GByC":[function(require,module,exports) {
"use strict";function t(t){return t.divWidth<500?t.ticks=Math.round(t.baseDataLength/t.numberofticks.sm):t.divWidth<740?t.ticks=Math.round(t.baseDataLength/t.numberofticks.md):t.divWidth<981&&(t.ticks=Math.round(t.baseDataLength/t.numberofticks.lg)),t}function e(e,l){if("cat"===(l=t(l)).chartType.substring(0,3))var a=d3.axisBottom().scale(l.scale.x).tickValues(l.scale.x.domain());else a=d3.axisBottom().scale(l.scale.x).tickFormat(l.xFormat).tickValues(l.scale.x.domain().filter(function(t,e){return!((l.baseDataLength-1-e)%l.ticks)}));e.append("g").attr("class","axis x-axis "+l.classname).style("font","1rem times ").style("font-family",l.font_family).attr("transform","translate(0,"+l.h+")").call(a).call(function(t){return t.select(".domain").style("stroke","#bebebe")}).call(function(t){return t.selectAll(".tick line").style("stroke","#bebebe")}).call(function(t){return t.selectAll(".tick line").attr("shape-rendering","crispEdges")});var s="end";l.divWidth<740&&"bar"!==l.chartType&&"catbarver"!==l.chartType&&(s="start");var r=3;l.divWidth>740&&(r=5),e.append("g").attr("class","axis y-axis left "+l.classname).style("font","1rem times").style("font-family",l.font_family).call(d3.axisLeft(l.scale.y.left).ticks(r)).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.selectAll(".tick line").style("stroke","#bebebe")}).call(function(t){return t.selectAll(".tick line").style("stroke-opacity","1")}).call(function(t){return t.selectAll(".tick line").style("stroke-width","1px")}).call(function(t){return t.selectAll(".tick line").attr("shape-rendering","crispEdges")}).call(function(t){return t.selectAll(".tick text").attr("text-anchor",s)})}function l(t,e){if(t.append("text").attr("transform","translate("+e.w/2+" ,"+(e.h+40)+")").style("text-anchor","middle").attr("class","xlabel "+e.classname+" labels").style("font","1rem times").style("font-family",e.font_family).text(e.xlabel),e.divWidth<740&&"bar"!==e.chartType&&"catbarver"!==e.chartType)var l=5;else l=e.margin.left-5;t.append("text").attr("x",-l).attr("y",-e.margin.top/2).attr("class","ylabel-left "+e.classname+" labels").style("font","1rem times").style("font-family",e.font_family).attr("text-anchor","start").text(e.ylabel)}function a(t,e){var l=3;e.divWidth>740&&(l=5),t.append("g").attr("class","axis y-axis left gridlines "+e.classname).call(d3.axisLeft(e.scale.y.left).ticks(l).tickSize(-e.w).tickFormat("")).call(function(t){return t.select(".domain").remove()}).call(function(t){return t.select(".tick text").remove()}).call(function(t){return t.selectAll(".tick line").style("stroke","#bebebe")}).call(function(t){return t.selectAll(".tick line").style("stroke-opacity","1")}).call(function(t){return t.selectAll(".tick line").style("stroke-width","1px")}).call(function(t){return t.selectAll(".tick line").attr("shape-rendering","crispEdges")})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tickNumber=t,exports.drawAxis=e,exports.drawLabels=l,exports.drawGridLines=a;
},{}],"oRY6":[function(require,module,exports) {
"use strict";function e(e,t){if(""!==t.measureName)if(t.locationNames.length>1)var a=document.getElementById("hb-"+t.classname).value,n=e.filter(function(e){return e[t.locationNames[0]]==a&&e[t.locationNames[t.locationNames.length-1]]==t.locname&&e.measure==t.measure});else n=e.filter(function(e){return e[t.locationNames[t.locationNames.length-1]]==t.locname&&e.measure==t.measure});else if(t.locationNames.length>1)a=document.getElementById("hb-"+t.classname).value,n=e.filter(function(e){return e[t.locationNames[0]]==a&&e[t.locationNames[t.locationNames.length-1]]==t.locname});else n=e.filter(function(e){return e[t.locationNames[t.locationNames.length-1]]==t.locname});return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dataUpdate=e;
},{}],"uThg":[function(require,module,exports) {
"use strict";function e(e){var s=d3.select("#figure-legend-"+e.classname);if(1===e.variableNames.length)s.style("display","none");else{for(var a=[],l=0;l<e.variableNames.length;l++)a.push("<span style='white-space: nowrap;'><span style='color:"+e.colours[e.colourNumbers[l]]+"' class='font-size--big colour__"+e.colourNumbers[l-3]+"--color'> &#9644;</strong></span>"+e.variableLabels[l]+"</span>");s.style("max-width",e.maxWidth+"px"),s.html(a.join(" &nbsp;"))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawLegend=e;
},{}],"MyOo":[function(require,module,exports) {
"use strict";function e(e,n){for(var t=e.filter(function(e){return"Scotland"!==e[n.locationNames[0]].substr(e[n.locationNames[0]].length-8)}),o=d3.nest().key(function(e){return e[n.locationNames[0]]}).entries(t),a=0;a<o.length;a++){document.getElementById("hb-"+n.classname).innerHTML+='<option value="'+o[a].key+'">'+o[a].key+"</option>"}}function n(e,n){var t=document.getElementById("location-"+n.classname);t&&(t.innerHTML="");var o=document.getElementById("hb-"+n.classname).value,a=e[e.length-1][n.dateCatName],r=e.filter(function(e){return e[n.locationNames[0]]===o&&e[n.locationNames[1]]!==o&&e[n.dateCatName]===a}),i=d3.nest().key(function(e){return e[n.locationNames[1]]}).entries(r),l="NHS Board";if("Scotland"!==o&&"NHSScotland"!==o&&"NHS Scotland"!==o||(l="All"),t){for(var s='<option value="'+o+'">'+l+"</option>",c=0;c<i.length;c++)s+='<option value="'+i[c].key+'">'+i[c].key+"</option>";t.innerHTML=s}}function t(e,n){var t=document.getElementById("measure-"+n.classname);t&&(t.innerHTML="");var o=d3.nest().key(function(e){return e.measure}).entries(e);if(t){for(var a="",r=0;r<o.length;r++)a+='<option value="'+o[r].key+'">'+o[r].key+"</option>";t.innerHTML=a}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropDownNHSBoard=e,exports.dropDownLocation=n,exports.dropDownMeasure=t;
},{}],"hz1V":[function(require,module,exports) {
"use strict";function t(t,e,a,n){var r=d3.line().x(function(t){return e.scale.x(t.date)+e.scale.x.bandwidth()/2}).y(function(t){return e.scale.y.left(t[a])}).defined(function(t){return 0===t[a]||t[a]});t.append("path").data([e.dataset]).attr("class","linev2 "+e.classname+" "+n).attr("stroke",e.colours[n]).attr("stroke-width",e.lineStroke).attr("fill","none").attr("d",r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawLine=t;
},{}],"ZAIj":[function(require,module,exports) {
"use strict";function t(t,e,a,r){var s=e.chartType.substring(0,3);t.selectAll("bars").data(e.dataset).enter().append("rect").attr("class",function(t,a){return"bars "+e.classname+" "+r+" index-"+a}).attr("x",function(t){return"cat"===s?e.scale.x(t.cat)+.05*e.scale.x.bandwidth():e.scale.x(t.date)+.05*e.scale.x.bandwidth()}).attr("y",function(t){return e.scale.y.left(t[a])}).attr("height",function(t){return e.h-e.scale.y.left(t[a])}).attr("width",.9*e.scale.x.bandwidth()).attr("fill",e.colours[r])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawBars=t;
},{}],"sqTa":[function(require,module,exports) {
"use strict";function e(e,a,r){var t=a.variableNames[r],l=a.colourNumbers[r-3],s=!1;if(r-1==2)s=!0;var n=d3.area().x(function(e){return a.scale.x(e.date)+a.scale.x.bandwidth()/2}).y1(function(e){if(s)return a.scale.y.left(e[t]);for(var l=0,n=3;n<r;n++)l+=e[a.variableNames[n]];return a.scale.y.left(e[t]+l)}).y0(function(e){if(s)return a.scale.y.left(0);for(var t=0,l=3;l<r;l++)t+=e[a.variableNames[l]];return a.scale.y.left(t)});e.append("path").data([a.dataset]).attr("class","linev2 "+a.classname+" "+l).attr("stroke",a.colours[l]).attr("stroke-width",a.lineStroke).attr("fill",a.colours[l]).attr("d",n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawArea=e;
},{}],"DhnR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawChart=s;var r=require("../modules/draw-lines.js"),e=require("../modules/draw-bar.js"),a=require("../modules/draw-areas.js");function s(s,t){for(var u=0;u<t.variableNames.length;u++)"line"===t.chartType?(0,r.drawLine)(s,t,t.variableNames[u],t.colourNumbers[u]):"area"===t.chartType?(0,a.drawArea)(s,t,u):"bar"!==t.chartType&&"catbarver"!==t.chartType||(0,e.drawBars)(s,t,t.variableNames[0],t.colourNumbers[0])}
},{"../modules/draw-lines.js":"hz1V","../modules/draw-bar.js":"ZAIj","../modules/draw-areas.js":"sqTa"}],"dakc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AllinOne=void 0;var t=require("../modules/tooltip.js"),i=require("../modules/scale.js"),a=require("../modules/hover-bars.js"),e=require("../modules/axis-labels.js"),r=require("../modules/data-processing.js"),s=require("../modules/legend.js"),h=require("../modules/dropdowns.js"),n=require("../modules/draw-chart.js");function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function c(t,i){for(var a=0;a<i.length;a++){var e=i[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function d(t,i,a){return i&&c(t.prototype,i),a&&c(t,a),t}var _=function(){function c(t,i){o(this,c),this._datastore=t,this._chart_info=i}return d(c,[{key:"dropDownBoard",value:function(){(0,h.dropDownNHSBoard)(this._datastore,this._chart_info)}},{key:"dropDownLocation",value:function(){(0,h.dropDownLocation)(this._datastore,this._chart_info)}},{key:"dropDownMeasure",value:function(){(0,h.dropDownMeasure)(this._datastore,this._chart_info)}},{key:"locationUpdate",value:function(){this._chart_info.locname=this._chart_info.locnameFunc(),document.getElementById(this._chart_info.location_title+this._chart_info.classname).textContent=this._chart_info.locname+this._chart_info.title}},{key:"measureUpdate",value:function(){this._chart_info.measure=this._chart_info.measureFunc()}},{key:"toolTip",value:function(){(0,t.chartToolTip)(this._chart_info)}},{key:"dataUpdate",value:function(){this._chart_info.dataset=(0,r.dataUpdate)(this._datastore,this._chart_info)}},{key:"legend",value:function(){(0,s.drawLegend)(this._chart_info)}},{key:"base",value:function(){var t=this._chart_info.chartType.substring(0,3);this._chart_info.scale.x=d3.scaleBand().domain(this._chart_info.dataset.map(function(i){return"cat"===t?i.cat:i.date})),this._chart_info.baseDataLength=this._chart_info.dataset.length}},{key:"scale",value:function(){this._chart_info=(0,i.chartWidthHeight)(this._chart_info),this._chart_info.scale.max.left=(0,i.yMax)(this._chart_info),this._chart_info=(0,i.chartScale)(this._chart_info)}},{key:"svg",value:function(){var t=d3.select(this._chart_info.htmlFigureId).html("").append("svg").attr("role","img").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("height",this._chart_info.h+this._chart_info.margin.top+this._chart_info.margin.bottom).attr("width",this._chart_info.divWidth);if(this._chart_info.divWidth<740&&"bar"!==this._chart_info.chartType&&"catbarver"!==this._chart_info.chartType)var i=15;else i=this._chart_info.margin.left;this.chart=t.append("g"),this.chart.attr("transform","translate("+i+","+this._chart_info.margin.top+")")}},{key:"drawChart",value:function(){(0,n.drawChart)(this.chart,this.chart_info)}},{key:"axis",value:function(){(0,e.drawAxis)(this.chart,this._chart_info),(0,e.drawLabels)(this.chart,this._chart_info)}},{key:"gridlines",value:function(){(0,e.drawGridLines)(this.chart,this._chart_info)}},{key:"hoverBar",value:function(){(0,a.drawHoverBar)(this.chart,this.chart_info)}},{key:"start",value:function(){this.toolTip(),this.dropDownBoard(),this.dropDownLocation(),""!==this.chart_info.measureName&&(this.dropDownMeasure(),this.measureUpdate()),this.locationUpdate(),this.dataUpdate(),this.base(),this.legend(),this.scale(),this.svg(),this.gridlines(),this.drawChart(),this.axis(),this.hoverBar()}},{key:"resizeChart",value:function(){this.legend(),this.scale(),this.svg(),this.gridlines(),this.drawChart(),this.axis(),this.hoverBar()}},{key:"dropdown1",value:function(){this.dropDownLocation(),this.locationUpdate(),this.dataUpdate(),this.legend(),this.scale(),this.svg(),this.gridlines(),this.drawChart(),this.axis(),this.hoverBar()}},{key:"dropdown2",value:function(){this.locationUpdate(),this.dataUpdate(),this.legend(),this.scale(),this.svg(),this.gridlines(),this.drawChart(),this.axis(),this.hoverBar()}},{key:"dropdown3",value:function(){this.measureUpdate(),this.dataUpdate(),this.legend(),this.scale(),this.svg(),this.gridlines(),this.drawChart(),this.axis(),this.hoverBar()}},{key:"datastore",set:function(t){this._datastore=t},get:function(){return this._datastore}},{key:"chart_info",set:function(t){this._chart_info=t},get:function(){return this._chart_info}},{key:"chart",set:function(t){this._chartObj=t},get:function(){return this._chartObj}}]),c}();exports.AllinOne=_;
},{"../modules/tooltip.js":"MmnY","../modules/scale.js":"TeHb","../modules/hover-bars.js":"K168","../modules/axis-labels.js":"GByC","../modules/data-processing.js":"oRY6","../modules/legend.js":"uThg","../modules/dropdowns.js":"MyOo","../modules/draw-chart.js":"DhnR"}],"fYfc":[function(require,module,exports) {
"use strict";var e=require("../modules/html.js"),a=require("../modules/settings.js"),t=require("../classes/AllinOne.js"),n=(0,e.getScriptSettings)();d3.json(n.json,function(s,r){s&&console.log(s);var o=(0,a.setSettings)(r,n.id);o.xFormat=d3.timeFormat(o.xFormatString),d3.csv(n.filename,function(a,n){var s="date";o.classname.substring(7,8);console.log(o.chartType.substring(0,3)),"cat"===o.chartType.substring(0,3)&&(s="cat");var r=d3.timeParse(o.dateFormatInput);n.forEach(function(e,a){e[s]="cat"===s?e[o.dateCatName]:r(e[o.dateCatName]),void 0===o.measureName&&""===o.measureName||(e.measure=e[o.measureName]);for(var t=0;t<o.variableNames.length;t++)e[o.variableNames[t]]=+e[o.variableNames[t]]}),(0,e.addHTML)(o);var i=new t.AllinOne(n,o);i.start(),window.addEventListener("resize",function(){i.resizeChart()}),document.getElementsByClassName("dropdown "+i.chart_info.classname+" I")[0].addEventListener("change",function(){i.dropdown1()});var d=document.getElementsByClassName("dropdown "+i.chart_info.classname+" II");d.length>0&&d[0].addEventListener("change",function(){i.dropdown2()});var m=document.getElementsByClassName("dropdown "+i.chart_info.classname+" III");m.length>0&&m[0].addEventListener("change",function(){i.dropdown3()})})});
},{"../modules/html.js":"jdwT","../modules/settings.js":"TYfu","../classes/AllinOne.js":"dakc"}]},{},["fYfc"], null)
//# sourceMappingURL=/allinone.v.0.3.min.js.map